<div class="container m-4">
  <div class="row">
    <div class="col">

      <h1>Browse Orders</h1>
    </div>
  </div>

  <div class="row">
    <div class="col text-right pb-3">
      <a class="btn btn-outline-dark" href="/orders/byDate" role="button">Sort by Date</a>
      <a class="btn btn-outline-dark ml-2" href="/orders/byPrice" role="button">Filter by Price</a>
      <a class="btn btn-primary ml-5" href="#" data-toggle="modal" data-target="#exampleModalCenter" role="button">+
        New</a>
    </div>
  </div>
  {{!-- <!-- Button trigger modal -->
  <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalCenter">
    Launch demo modal
  </button> --}}

  {{!-- Calculate total price off the sum of the orders prices --}}

  <div class="row">
    <div class="col">
      <table style="width:100%">
        <tr>
          <th>Purchase Date</th>
          <th>Total Price</th>
          <th>Customer</th>
          <th>Branch</th>
          <th>Edit</th>
          <th>Del.</th>
        </tr>

        {{#each orders}}
        <tr>
          <td>{{purchase_date}}</td>
          <td>{{total_price}}</td>
          <td>{{customer}}</td>
          <td>{{branch}}</td>
          <td class="text-center"><a href="/orders/{{id}}">‚úèÔ∏è</a></td>
          <td class="text-center"><button class="bg-transparent border-0" onclick="deleteOrder({{id}})">üóë</button></td>

        </tr>
        {{/each}}
      </table>
    </div>
  </div>

</div>

<!-- Modal -->
<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Add a New Order</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form id="addorder" method="post">
        <div class="modal-body">

          <div class="form-group">
            <label for="orderDate">Purchase Date</label>
            <input type="date" name="orderDate" class="form-control" id="orderDate" aria-describedby="orderDate"
              placeholder="Enter date">
            <!--<small id="dateHelp" class="form-text text-muted">Ex. "2020-07-20" (YYYY-MM-DD)</small>-->
          </div>

          <div class="form-group">
            <label for="orderPrice">Price</label>
            <input type="number" name="orderPrice" class="form-control" id="orderPrice" aria-describedby="orderPrice"
              placeholder="Enter price">
            <!--<small id="dateHelp" class="form-text text-muted">Ex. "2020-07-20" (YYYY-MM-DD)</small>-->
          </div>

          <div class="form-group">
            <label for="orderCustomer">Customer</label>
            <select id="orderCustomer" name="orderCustomer">
              {{#each customers}}
              <option value="{{id}}">{{name}}</option>
              {{/each}}
            </select>
          </div>

          <div class="form-group">
            <label for="orderBranch">Branch</label>
            <select id="orderBranch" name="orderBranch">
              {{#each branches}}
              <option value="{{id}}">{{name}}</option>
              {{/each}}
            </select>
          </div>

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary">Submit</button>
        </div>
      </form>
    </div>
  </div>
</div>

<script type="text/javascript" src="/deleteorder.js" defer></script>
